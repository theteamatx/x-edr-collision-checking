cc_library(
    name = "osqp",
    srcs = [
        "include/auxil.h",
        "include/constants.h",
        "include/cs.h",
        "include/error.h",
        "include/glob_opts.h",
        "include/kkt.h",
        "include/lin_alg.h",
        "include/lin_sys.h",
        # This file is manually generated by running cmake!
        #
        # When running cmake, use -DCTRLC=OFF to disable the ctrl-C
        # signal handler.  That handler suffers from a data race that
        # is triggered when multiple OSQP solvers are run in parallel.
        "include/osqp_configure.h",
        "include/polish.h",
        "include/proj.h",
        "include/scaling.h",
        "include/types.h",
        "include/util.h",
        "lin_sys/direct/qdldl/qdldl_interface.c",
        "lin_sys/direct/qdldl/qdldl_interface.h",
        "src/auxil.c",
        "src/cs.c",
        "src/ctrlc.c",
        "src/error.c",
        "src/kkt.c",
        "src/lin_alg.c",
        "src/lin_sys.c",
        "src/osqp.c",
        "src/polish.c",
        "src/proj.c",
        "src/scaling.c",
        "src/util.c",
    ],
    hdrs = [
        "include/ctrlc.h",
        "include/osqp.h",
    ],
    copts = [
        "-w",
        "-Ithird_party/osqp/include",
        "-Ithird_party/osqp/lin_sys/direct/qdldl",
        "-Ithird_party/qdldl/include",
    ],
#    deps = [
#        "//third_party/SuiteSparse:amd_long",
#        "//third_party/qdldl",
#    ],
    visibility = ["//visibility:public"],
)